<!DOCTYPE html>
<html data-theme="light">
<head>
    <script src="https://kit.fontawesome.com/cb45c0562b.js" crossorigin="anonymous"></script>
<style>
*{
    padding: 0;
    margin: 0;
    box-sizing: border-box;
    font-family: roboto;
    background-image: linear-gradient(to bottom right, #99ff99 0%,#ffff99 100%);
    background-repeat: no-repeat;
    background-attachment: fixed;
}
html{
    --bg: #e9eef4;
    --color-text: #0e0e0e;
    --color-border: #bcbfc2;
    --btn-active: #bcbfc2;
}
/*for dark mode*/
html[data-theme="dark"]{
   --bg: #2d2e2f;
   --color-text: #fff;
   --color-border: #6c7073;
   --btn-active: #424548;
}
/*Heading*/
.heading {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 .8rem .4rem;
}

.heading span {
    color: var(--color-text);
    font-size: 1.3rem;
}

.fas {
    cursor: pointer;
}

label input[type="checkbox"]{
    -webkit-appearance: none;
}

/*main*/
.calculator{
    display: grid;
    grid-template-rows: 2fr 2fr;
    grid-template-columns: 20fr;
    padding: 4rem 0;
    max-width: 300px;
    width: 100%;
    margin: 0 auto;
}
.display{
    display: inline-grid;
    grid-template-columns: auto auto; 
}

/*screen*/
#myText{
text-align: right;
padding: .5rem 1rem 0rem;
font-size: 1.8rem;
color: var(--color-text);
background: var(--bg);
white-space: nowrap;
overflow-y: hidden;
overflow-x: auto;
}

/*clear*/
#clr{
    border: none;
    width: 70px;
    height: auto;
    font-size: 2rem;
    color: var(--color-text);
    background: var(--bg);
    outline: none;
    cursor: pointer;
} 
#clr:active {
    background: var(--btn-active);
    cursor: pointer;
}
/*button*/
.button{
    border-top: 1px solid var(--color-border);
    display: grid;
    grid-template-columns: 5fr 1fr;
}

/*numeral input*/
.numip{
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(4, 112px);
    background: var(--bg);
    border-right: 1px solid var(--color-border);
}

.btn{
    border: none;
    width: 100%;
    height: 100%;
    font-size: 1.5rem;
    color: var(--color-text);
    background: var(--bg);
    outline: none;
    cursor: pointer;
}


.btn:active {
    background: var(--btn-active);
    cursor: pointer;
}

/*operation input*/
.ops{
    border: none;
display: grid;
grid-template-rows: auto auto auto auto;
background: var(--bg);
}

.expand{
    display: grid;
    background: var(--bg);
    border-right: 1px solid var(--color-border);
    }

</style>
</head>   
<body>
<div class="calculator">
<div class="heading" display: >
    <span>
        <i class="fas fa-calculator"></i>
        <i class="fas fa-calculator"></i>
        <i class="fas fa-calculator"></i>
    </span>
    <span>
        <label>
            <input type="checkbox" name="theme">
            <span class="btn"></span>
            <i class="fas fa-cloud-moon"></i>
        </label>
    </span>
    <span>
         <label>
            <input type="checkbox" onclick="openTab('b1')">
            <span class="btn"></span>
            <i class="fas fa-expand-arrows-alt"></i>
        </label>
    </span>
</div>
<div class="display">
    <button onclick="cls()" id="clr">c</button>
<span>
    <input type="text" id="myText" style="border: none;">
</span>
</div>
<div class="button">
<div class="numip">
    <button class="btn" onclick="fnc('7')" value="7" >7</button>
    <button class="btn" onclick="fnc('8')" value="8" >8</button>
    <button class="btn" onclick="fnc('9')" value="9" >9</button>
    <button class="btn" onclick="fnc('4')" value="4" >4</button>
    <button class="btn" onclick="fnc('5')" value="5" >5</button>
    <button class="btn" onclick="fnc('6')" value="6" >6</button>
    <button class="btn" onclick="fnc('1')" value="1" >1</button>
    <button class="btn" onclick="fnc('2')" value="2" >2</button>
    <button class="btn" onclick="fnc('3')" value="3" >3</button>
    <button class="btn" onclick="fnc('0')" value="0" >0</button>
    <button class="btn" onclick="fnc('.')" value="." >.</button> 
    <button class="btn" onclick="equal('=')" value="=" id="eq">=</button>
</div>
<div class="ops">
    <button class="btn" onclick="fnc('+')" value="+" style="height:112px" >+</button>
    <button class="btn" onclick="fnc('-')" value="-" style="height:112px" >-</button>
    <button class="btn" onclick="fnc('*')" value="*" style="height:112px">*</button>
    <button class="btn" onclick="fnc('/')" value="/" style="height:112px">/</button>
</div>
<!--expand section-->
<div id="b1" class="expand" style="display:none;">
<button class="btn" onclick="fnc('(')" value="(" >(</button> 
<button class="btn" onclick="fnc(')')" value=")" >)</button> 
<button class="btn" onclick="percent('%')" value="%" id="per">%</button>
<button class="btn" onclick="root()" value="&#10003" id="root">&#10003</button>
</div>

</div>
<script>
function fnc(v) {
    document.getElementById("myText").value += v;
    console.log (v);
}
/*function button*/
function equal(){
    let x = document.getElementById("myText").value
    let y = eval(x)
    document.getElementById("myText").value = y
    console.log (y);
    /*expressData = x
    resultData = y
    history.push({expression: expressData, result: resultData});
    showHistory()*/
}

function percent(){
    let x = document.getElementById("myText").value
    let y = x/100
    document.getElementById("myText").value = y
    console.log (y);
}

function root() {
    let x = document.getElementById("myText").value
    let y = Math.sqrt(x)
    document.getElementById("myText").value = y
    console.log (y);
}

/*key binding*/
var enter = document.getElementById("myText");
enter.addEventListener("keyup",function(result){
    if (result.keyCode === 13) {
        result.preventDefault();
        document.getElementById("eq").click();
    }
})

function cls() {
    document.getElementById("myText").value = ""
}
var del = document.getElementById("myText");
enter.addEventListener("keyup",function(blank){
    if (blank.keyCode === 46) {
        blank.preventDefault();
        document.getElementById("clr").click();
    }
})


/*other*/
let checkbox = document.querySelector('input[name=theme]');
checkbox.addEventListener('change', function() {
    if (this.checked) {
        document.documentElement.setAttribute('data-theme', 'dark');
    } else {
        document.documentElement.setAttribute('data-theme', 'light');
    }  
})


function openTab(tabName) {
var expand = document.getElementById("b1")
if (expand.style.display === "none") {
    expand.style.display = "block";
} else {
    expand.style.display = "none";
}
}


/*const logHistory = document.getElementById("history")
let history = [];
let expressData = "";
let resultData = "";

function showHistory() {
    let log = ""
    for (let key in history) {
        log += history[key].expression + "=" + history[key].result + "<br>"
    }
    logHistory.innerHTML = log
}

let indexHistory = document.getElementsByClassName("fa-history")
indexHistory[0].addEventListener("click", function(){
    logHistory.classList.toggle("indexHistory")
})*/
</script>
</body>

</html>